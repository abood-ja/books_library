<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../jacoco-resources/report.css" type="text/css"/><link rel="shortcut icon" href="../jacoco-resources/report.gif" type="image/gif"/><title>clsBook.java</title><link rel="stylesheet" href="../jacoco-resources/prettify.css" type="text/css"/><script type="text/javascript" src="../jacoco-resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../jacoco-sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">Library</a> &gt; <a href="index.source.html" class="el_package">aboodZaidLibrary</a> &gt; <span class="el_source">clsBook.java</span></div><h1>clsBook.java</h1><pre class="source lang-java linenums">package aboodZaidLibrary;

import java.io.*;
import java.util.Arrays;
import java.util.Vector;




public class   clsBook {
    private enMode _Mode;
    private String _Title;
    private String _Author;
    private String _ISBN;
<span class="fc" id="L15">    private boolean _MarkedForDelete = false;</span>
<span class="fc" id="L16">    public enum enMode {</span>
<span class="fc" id="L17">        EmptyMode(0),</span>
<span class="fc" id="L18">        AddNewMode(1),</span>
<span class="fc" id="L19">        UpdateMode(2);</span>

        private final int value;

<span class="fc" id="L23">        enMode(int value) {</span>
<span class="fc" id="L24">            this.value = value;</span>
<span class="fc" id="L25">        }</span>

        public int getValue() {
<span class="nc" id="L28">            return value;</span>
        }
    }
    private static clsBook _ConvertLineToBookObject(String line,String separator){
<span class="fc" id="L32">        Vector&lt;String&gt;vBookData=new Vector&lt;&gt;(Arrays.asList(line.split(separator)));</span>
<span class="fc" id="L33">        return new clsBook(enMode.UpdateMode,vBookData.get(0),vBookData.get(1),vBookData.get(2));</span>
    }
    private static clsBook _ConvertLineToBookObject(String line){
<span class="fc" id="L36">        return _ConvertLineToBookObject(line,&quot;#//#&quot;);</span>
    }
    private static String _ConvertBookObjectToLine(clsBook book,String separator){
<span class="fc" id="L39">    String bookRecord=&quot;&quot;;</span>
<span class="fc" id="L40">    bookRecord+=book._Title+separator;</span>
<span class="fc" id="L41">    bookRecord+=book._Author+separator;</span>
<span class="fc" id="L42">    bookRecord+=book._ISBN;</span>
<span class="fc" id="L43">    return bookRecord;</span>
    }
    private static String _ConvertBookObjectToLine(clsBook book){
<span class="fc" id="L46">        return _ConvertBookObjectToLine(book,&quot;#//#&quot;);</span>
    }
    private static clsBook _GetEmptyBookObject()
    {
<span class="fc" id="L50">        return new clsBook(enMode.EmptyMode, &quot;&quot;, &quot;&quot;, &quot;&quot;);</span>
    }
    private static Vector&lt;clsBook&gt; _LoadBooksDataFromFile(){
<span class="fc" id="L53">        Vector&lt;clsBook&gt; vBooks = new Vector&lt;&gt;();</span>
<span class="fc" id="L54">        String fileName = &quot;Books.txt&quot;;</span>

<span class="fc" id="L56">        try (BufferedReader br = new BufferedReader(new FileReader(fileName))) {</span>
            String line;
<span class="fc bfc" id="L58" title="All 2 branches covered.">            while ((line = br.readLine()) != null) {</span>
<span class="fc" id="L59">                clsBook  book = _ConvertLineToBookObject(line);</span>
<span class="fc" id="L60">                vBooks.add(book);</span>
<span class="fc" id="L61">            }</span>
<span class="nc" id="L62">        } catch (IOException e) {</span>
<span class="nc" id="L63">            e.printStackTrace();</span>
<span class="fc" id="L64">        }</span>

<span class="fc" id="L66">        return vBooks;</span>
    }
    private static void _SaveBooksDataToFile(Vector&lt;clsBook&gt; vBooks) {
<span class="fc" id="L69">        String fileName = &quot;Books.txt&quot;;</span>
<span class="fc" id="L70">        try (BufferedWriter bw = new BufferedWriter(new FileWriter(fileName))) {</span>
<span class="fc bfc" id="L71" title="All 2 branches covered.">            for (clsBook u : vBooks) {</span>
<span class="pc bpc" id="L72" title="1 of 2 branches missed.">                if (!u.isMarkedForDeleted()) {</span>
<span class="nc" id="L73">                    String dataLine = _ConvertBookObjectToLine(u);</span>
<span class="nc" id="L74">                    bw.write(dataLine);</span>
<span class="nc" id="L75">                    bw.newLine();</span>
                }
<span class="fc" id="L77">            }</span>
<span class="nc" id="L78">        } catch (IOException e) {</span>
<span class="nc" id="L79">            e.printStackTrace();</span>
<span class="fc" id="L80">        }</span>
<span class="fc" id="L81">    }</span>
    private static void _AddDataLineToFile(String stDataLine) {
<span class="fc" id="L83">        String fileName = &quot;Books.txt&quot;;</span>
<span class="fc" id="L84">        try (BufferedWriter bw = new BufferedWriter(new FileWriter(fileName, true))) {</span>
<span class="fc" id="L85">            bw.write(stDataLine);</span>
<span class="fc" id="L86">            bw.newLine();</span>
<span class="nc" id="L87">        } catch (IOException e) {</span>
<span class="nc" id="L88">            e.printStackTrace();</span>
<span class="fc" id="L89">        }</span>
<span class="fc" id="L90">    }</span>
    private void _AddNew()
    {
<span class="fc" id="L93">        _AddDataLineToFile(_ConvertBookObjectToLine(this));</span>
<span class="fc" id="L94">    }</span>
<span class="fc" id="L95">    public clsBook(enMode mode, String title, String author, String isbn){</span>
<span class="fc" id="L96">        _Mode = mode;</span>
<span class="fc" id="L97">        _Title = title;</span>
<span class="fc" id="L98">        _Author = author;</span>
<span class="fc" id="L99">        _ISBN = isbn;</span>
<span class="fc" id="L100">    }</span>
    public boolean isEmpty() {
<span class="fc bfc" id="L102" title="All 2 branches covered.">        return this._Mode == enMode.EmptyMode;</span>
    }
    public boolean isMarkedForDeleted()
    {
<span class="fc" id="L106">        return _MarkedForDelete;</span>
    }
    public void setTitle(String title) {
<span class="fc" id="L109">        _Title = title;</span>
<span class="fc" id="L110">    }</span>
    public void setAuthor(String author) {
<span class="fc" id="L112">        _Author = author;</span>
<span class="fc" id="L113">    }</span>
    public void setISBN(String isbn) {
<span class="fc" id="L115">        _ISBN = isbn;</span>
<span class="fc" id="L116">    }</span>
    public String getTitle(){
<span class="fc" id="L118">        return  _Title;</span>
    }
    public String getAuthor(){
<span class="fc" id="L121">        return _Author;</span>
    }
    public String getISBN(){
<span class="fc" id="L124">        return _ISBN;</span>
    }
    public static clsBook findBookByTitle(String title) {
<span class="fc" id="L127">        String fileName = &quot;Books.txt&quot;;</span>
<span class="fc" id="L128">        try (BufferedReader br = new BufferedReader(new FileReader(fileName))) {</span>
            String line;
<span class="fc bfc" id="L130" title="All 2 branches covered.">            while ((line = br.readLine()) != null) {</span>
<span class="fc" id="L131">                clsBook book = _ConvertLineToBookObject(line);</span>
<span class="pc bpc" id="L132" title="1 of 2 branches missed.">                if (book.getTitle().equals(title)) {</span>
<span class="fc" id="L133">                    return book;</span>
                }
<span class="nc" id="L135">            }</span>
<span class="pc" id="L136">        } catch (IOException e) {</span>
<span class="nc" id="L137">            e.printStackTrace();</span>
<span class="fc" id="L138">        }</span>
<span class="fc" id="L139">        return _GetEmptyBookObject();</span>
    }
    public static clsBook findBookByAuthor(String author) {
<span class="fc" id="L142">        String fileName = &quot;Books.txt&quot;;</span>
<span class="fc" id="L143">        try (BufferedReader br = new BufferedReader(new FileReader(fileName))) {</span>
            String line;
<span class="fc bfc" id="L145" title="All 2 branches covered.">            while ((line = br.readLine()) != null) {</span>
<span class="fc" id="L146">                clsBook book = _ConvertLineToBookObject(line);</span>
<span class="pc bpc" id="L147" title="1 of 2 branches missed.">                if (book.getAuthor().equals(author)) {</span>
<span class="fc" id="L148">                    return book;</span>
                }
<span class="nc" id="L150">            }</span>
<span class="pc" id="L151">        } catch (IOException e) {</span>
<span class="nc" id="L152">            e.printStackTrace();</span>
<span class="fc" id="L153">        }</span>
<span class="fc" id="L154">        return _GetEmptyBookObject();</span>
    }
    public static clsBook findBookByISBN(String isbn) {
<span class="fc" id="L157">        String fileName = &quot;Books.txt&quot;;</span>
<span class="fc" id="L158">        try (BufferedReader br = new BufferedReader(new FileReader(fileName))) {</span>
            String line;
<span class="fc bfc" id="L160" title="All 2 branches covered.">            while ((line = br.readLine()) != null) {</span>
<span class="fc" id="L161">                clsBook book = _ConvertLineToBookObject(line);</span>
<span class="fc bfc" id="L162" title="All 2 branches covered.">                if (book.getISBN().equals(isbn)) {</span>
<span class="fc" id="L163">                    return book;</span>
                }
<span class="fc" id="L165">            }</span>
<span class="pc" id="L166">        } catch (IOException e) {</span>
<span class="nc" id="L167">            e.printStackTrace();</span>
<span class="fc" id="L168">        }</span>
<span class="fc" id="L169">        return _GetEmptyBookObject();</span>
    }
    public static Vector&lt;clsBook&gt; findBooksByTitle(String title) {
<span class="fc" id="L172">        Vector&lt;clsBook&gt; results = new Vector&lt;&gt;();</span>
<span class="fc" id="L173">        String fileName = &quot;Books.txt&quot;;</span>
<span class="fc" id="L174">        try (BufferedReader br = new BufferedReader(new FileReader(fileName))) {</span>
            String line;
<span class="fc bfc" id="L176" title="All 2 branches covered.">            while ((line = br.readLine()) != null) {</span>
<span class="fc" id="L177">                clsBook book = _ConvertLineToBookObject(line);</span>
<span class="pc bpc" id="L178" title="1 of 2 branches missed.">                if (book.getTitle().equals(title)) {</span>
<span class="fc" id="L179">                    results.add(book);</span>
                }
<span class="fc" id="L181">            }</span>
<span class="nc" id="L182">        } catch (IOException e) {</span>
<span class="nc" id="L183">            e.printStackTrace();</span>
<span class="fc" id="L184">        }</span>
<span class="fc" id="L185">        return results;</span>
    }
    public static Vector&lt;clsBook&gt; findBooksByAuthor(String author) {
<span class="fc" id="L188">        Vector&lt;clsBook&gt; results = new Vector&lt;&gt;();</span>
<span class="fc" id="L189">        String fileName = &quot;Books.txt&quot;;</span>
<span class="fc" id="L190">        try (BufferedReader br = new BufferedReader(new FileReader(fileName))) {</span>
            String line;
<span class="fc bfc" id="L192" title="All 2 branches covered.">            while ((line = br.readLine()) != null) {</span>
<span class="fc" id="L193">                clsBook book = _ConvertLineToBookObject(line);</span>
<span class="fc bfc" id="L194" title="All 2 branches covered.">                if (book.getAuthor().equals(author)) {</span>
<span class="fc" id="L195">                    results.add(book);</span>
                }
<span class="fc" id="L197">            }</span>
<span class="nc" id="L198">        } catch (IOException e) {</span>
<span class="nc" id="L199">            e.printStackTrace();</span>
<span class="fc" id="L200">        }</span>
<span class="fc" id="L201">        return results;</span>
    }
    public static Vector&lt;clsBook&gt; findBooksByISBN(String isbn) {
<span class="fc" id="L204">        Vector&lt;clsBook&gt; results = new Vector&lt;&gt;();</span>
<span class="fc" id="L205">        String fileName = &quot;Books.txt&quot;;</span>

<span class="fc" id="L207">        try (BufferedReader br = new BufferedReader(new FileReader(fileName))) {</span>
            String line;
<span class="fc bfc" id="L209" title="All 2 branches covered.">            while ((line = br.readLine()) != null) {</span>
<span class="fc" id="L210">                clsBook book = _ConvertLineToBookObject(line);</span>
<span class="fc bfc" id="L211" title="All 2 branches covered.">                if (book.getISBN().equals(isbn)) {</span>
<span class="fc" id="L212">                    results.add(book);</span>
                }
<span class="fc" id="L214">            }</span>
<span class="nc" id="L215">        } catch (IOException e) {</span>
<span class="nc" id="L216">            e.printStackTrace();</span>
<span class="fc" id="L217">        }</span>
<span class="fc" id="L218">        return results;</span>
    }
<span class="fc" id="L220">    public enum enSaveResults {</span>
<span class="fc" id="L221">        svFaildEmptyObject(0),</span>
<span class="fc" id="L222">        svSucceeded(1),</span>
<span class="fc" id="L223">        svFaildBookExists(2);</span>

        private final int value;

<span class="fc" id="L227">        enSaveResults(int value) {</span>
<span class="fc" id="L228">            this.value = value;</span>
<span class="fc" id="L229">        }</span>

        public int getValue() {
<span class="nc" id="L232">            return value;</span>
        }
    }
    public enSaveResults save() {
<span class="pc bpc" id="L236" title="2 of 4 branches missed.">        switch (_Mode) {</span>
            case EmptyMode:
<span class="pc bpc" id="L238" title="1 of 2 branches missed.">                if (isEmpty()) {</span>
<span class="fc" id="L239">                    return enSaveResults.svFaildEmptyObject;</span>
                }
                break;

            case UpdateMode:
<span class="nc" id="L244">                return enSaveResults.svSucceeded;</span>

            case AddNewMode:
<span class="fc bfc" id="L247" title="All 2 branches covered.">                if (isBookExist(_ISBN)) {</span>
<span class="fc" id="L248">                    return enSaveResults.svFaildBookExists;</span>
                } else {
<span class="fc" id="L250">                    _AddNew();</span>
<span class="fc" id="L251">                    _Mode = enMode.UpdateMode;</span>
<span class="fc" id="L252">                    return enSaveResults.svSucceeded;</span>
                }

            default:
<span class="nc" id="L256">                return enSaveResults.svFaildEmptyObject;</span>
        }

<span class="nc" id="L259">        return enSaveResults.svFaildEmptyObject;</span>
    }
    public static boolean isBookExist(String ispn) {
<span class="fc" id="L262">        clsBook book = findBookByISBN(ispn);</span>
<span class="fc bfc" id="L263" title="All 2 branches covered.">        return !book.isEmpty();</span>
    }
    public static clsBook GetAddNewBookObject(String ispn) {
<span class="fc" id="L266">        return  new clsBook(enMode.AddNewMode,&quot;&quot;,&quot;&quot;,ispn);</span>
    }
    public static Vector &lt;clsBook&gt; getBooksList() {
<span class="fc" id="L269">        return _LoadBooksDataFromFile();</span>
    }
    public boolean delete() {
<span class="fc" id="L272">        Vector&lt;clsBook&gt; vBooks = _LoadBooksDataFromFile();</span>
<span class="pc bpc" id="L273" title="1 of 2 branches missed.">        for (clsBook book : vBooks) {</span>
<span class="pc bpc" id="L274" title="1 of 2 branches missed.">            if (book.getISBN().equals(this._ISBN)) {</span>
<span class="fc" id="L275">                book._MarkedForDelete = true;</span>
<span class="fc" id="L276">                break;</span>
            }
<span class="nc" id="L278">        }</span>
<span class="fc" id="L279">        _SaveBooksDataToFile(vBooks);</span>
<span class="fc" id="L280">        clsBook emtpyBook = _GetEmptyBookObject();</span>
<span class="fc" id="L281">        this._Mode = emtpyBook._Mode;</span>
<span class="fc" id="L282">        this._Title = emtpyBook._Title;</span>
<span class="fc" id="L283">        this._Author = emtpyBook._Author;</span>
<span class="fc" id="L284">        this._ISBN = emtpyBook._ISBN;</span>
<span class="fc" id="L285">        this._MarkedForDelete = emtpyBook._MarkedForDelete;</span>
<span class="fc" id="L286">        return true;</span>
    }
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.jacoco.org/jacoco">JaCoCo</a> 0.8.8.202204050719</span></div></body></html>